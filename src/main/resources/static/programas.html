<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gesti√≥n de Programas - Sistema de Gesti√≥n Acad√©mica</title>
    <link rel="stylesheet" href="/css/styles.css">
</head>
<body>
    <header class="header">
        <div class="header-content">
            <a href="/" class="logo">üéì CorhuilaBD</a>
            <nav>
                <ul class="nav-menu">
                    <li><a href="/dashboard.html">Dashboard</a></li>
                    <li><a href="/estudiantes.html">Estudiantes</a></li>
                    <li><a href="/programas.html" style="background: #667eea; color: white;">Programas</a></li>
                    <li><a href="#" data-action="logout">Cerrar Sesi√≥n</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <div class="container">
        <div class="table-container fade-in">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem; flex-wrap: wrap; gap: 1rem;">
                <h1 class="table-title">üìö Gesti√≥n de Programas Acad√©micos</h1>
                <button class="btn btn-success" onclick="window.app.openNewModal('programa')">
                    ‚ûï Nuevo Programa
                </button>
            </div>

            <!-- Filtros -->
            <div style="background: white; padding: 1.5rem; border-radius: 15px; margin-bottom: 2rem; box-shadow: 0 5px 15px rgba(0,0,0,0.1);">
                <h3 style="color: #667eea; margin-bottom: 1rem;">üîç Filtros de B√∫squeda</h3>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem;">
                    <div>
                        <label for="filterFacultad" class="form-label">Facultad:</label>
                        <select id="filterFacultad" class="form-input" onchange="filterProgramas()">
                            <option value="">Todas las facultades</option>
                            <option value="Ingenier√≠a">Ingenier√≠a</option>
                            <option value="Ciencias">Ciencias</option>
                            <option value="Administraci√≥n">Administraci√≥n</option>
                            <option value="Humanidades">Humanidades</option>
                            <option value="Salud">Salud</option>
                        </select>
                    </div>
                    <div>
                        <label for="filterSemestres" class="form-label">Semestres:</label>
                        <select id="filterSemestres" class="form-input" onchange="filterProgramas()">
                            <option value="">Todos los semestres</option>
                            <option value="6">6 Semestres</option>
                            <option value="8">8 Semestres</option>
                            <option value="10">10 Semestres</option>
                        </select>
                    </div>
                    <div>
                        <label for="searchPrograma" class="form-label">Buscar:</label>
                        <input type="text" id="searchPrograma" class="form-input" placeholder="Nombre del programa..." onkeyup="filterProgramas()">
                    </div>
                </div>
            </div>

            <!-- Informaci√≥n sobre eliminaci√≥n l√≥gica -->
            <div style="background: #e8f5e8; padding: 1rem; border-radius: 10px; margin-bottom: 1rem; border-left: 4px solid #4caf50;">
                <h4 style="color: #388e3c; margin-bottom: 0.5rem;">‚ÑπÔ∏è Informaci√≥n del Sistema</h4>
                <p style="color: #2e7d32; font-size: 0.9rem; margin: 0;">
                    <strong>Eliminaci√≥n L√≥gica:</strong> Solo se muestran los programas activos. Los programas eliminados no aparecen en esta lista.
                </p>
            </div>
            
            <!-- Tabla de Programas -->
            <div class="table-container" style="overflow-x: auto;">
                <table id="programas-table" class="data-table">
                    <thead>
                        <tr>
                            <th>Nombre del Programa</th>
                            <th>Facultad</th>
                            <th>Semestres</th>
                            <th>Cr√©ditos</th>
                            <th>Descripci√≥n</th>
                            <th>Acciones</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- Los datos se cargar√°n din√°micamente -->
                    </tbody>
                </table>
            </div>

            <!-- Estad√≠sticas -->
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; margin-top: 2rem;">
                <div style="background: #e3f2fd; padding: 1rem; border-radius: 10px; text-align: center; border-left: 4px solid #2196f3;">
                    <div style="font-size: 1.5rem; font-weight: bold; color: #1976d2;" id="total-programas-filter">0</div>
                    <div style="color: #1565c0;">Total Programas</div>
                </div>
                <div style="background: #e8f5e8; padding: 1rem; border-radius: 10px; text-align: center; border-left: 4px solid #4caf50;">
                    <div style="font-size: 1.5rem; font-weight: bold; color: #388e3c;" id="programas-ingenieria-filter">0</div>
                    <div style="color: #2e7d32;">Programas de Ingenier√≠a</div>
                </div>
                <div style="background: #fff3e0; padding: 1rem; border-radius: 10px; text-align: center; border-left: 4px solid #ff9800;">
                    <div style="font-size: 1.5rem; font-weight: bold; color: #f57c00;" id="programas-ciencias-filter">0</div>
                    <div style="color: #ef6c00;">Programas de Ciencias</div>
                </div>
                <div style="background: #fce4ec; padding: 1rem; border-radius: 10px; text-align: center; border-left: 4px solid #e91e63;">
                    <div style="font-size: 1.5rem; font-weight: bold; color: #c2185b;" id="programas-admin-filter">0</div>
                    <div style="color: #ad1457;">Programas de Administraci√≥n</div>
                </div>
            </div>

            <!-- Informaci√≥n Adicional -->
            <div style="background: white; padding: 2rem; border-radius: 15px; margin-top: 2rem; box-shadow: 0 5px 15px rgba(0,0,0,0.1);">
                <h3 style="color: #667eea; margin-bottom: 1.5rem; text-align: center;">üìä Informaci√≥n de Programas</h3>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 2rem;">
                    <div>
                        <h4 style="color: #667eea; margin-bottom: 1rem;">üèóÔ∏è Estructura de Cr√©ditos</h4>
                        <ul style="list-style: none; padding: 0;">
                            <li style="padding: 0.5rem 0; border-bottom: 1px solid #eee;">
                                <strong>6 Semestres:</strong> 120-140 cr√©ditos
                            </li>
                            <li style="padding: 0.5rem 0; border-bottom: 1px solid #eee;">
                                <strong>8 Semestres:</strong> 160-180 cr√©ditos
                            </li>
                            <li style="padding: 0.5rem 0;">
                                <strong>10 Semestres:</strong> 200-220 cr√©ditos
                            </li>
                        </ul>
                    </div>
                    <div>
                        <h4 style="color: #667eea; margin-bottom: 1rem;">üéØ Facultades Disponibles</h4>
                        <ul style="list-style: none; padding: 0;">
                            <li style="padding: 0.5rem 0; border-bottom: 1px solid #eee;">üè≠ Ingenier√≠a</li>
                            <li style="padding: 0.5rem 0; border-bottom: 1px solid #eee;">üî¨ Ciencias</li>
                            <li style="padding: 0.5rem 0; border-bottom: 1px solid #eee;">üíº Administraci√≥n</li>
                            <li style="padding: 0.5rem 0;">üìö Humanidades</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal para Crear/Editar Programa -->
    <div id="programaModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title" id="programaModalTitle">‚ûï Nuevo Programa Acad√©mico</h2>
                <span class="close" onclick="hideModal('programaModal')">&times;</span>
            </div>
            
            <form data-form="programa" id="programaForm">
                <input type="hidden" id="programaId" name="id">
                
                <div class="form-group">
                    <label for="nombrePrograma" class="form-label">Nombre del Programa *</label>
                    <input type="text" id="nombrePrograma" name="nombre" class="form-input" required 
                           placeholder="Ingresa el nombre del programa acad√©mico">
                </div>
                
                <div class="form-group">
                    <label for="facultadPrograma" class="form-label">Facultad *</label>
                    <select id="facultadPrograma" name="facultad" class="form-input" required>
                        <option value="">Selecciona la facultad</option>
                        <option value="Ingenier√≠a">Ingenier√≠a</option>
                        <option value="Ciencias">Ciencias</option>
                        <option value="Administraci√≥n">Administraci√≥n</option>
                        <option value="Humanidades">Humanidades</option>
                        <option value="Salud">Salud</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="semestresPrograma" class="form-label">N√∫mero de Semestres *</label>
                    <select id="semestresPrograma" name="semestres" class="form-input" required>
                        <option value="">Selecciona el n√∫mero de semestres</option>
                        <option value="6">6 Semestres</option>
                        <option value="8">8 Semestres</option>
                        <option value="10">10 Semestres</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="creditosPrograma" class="form-label">N√∫mero de Cr√©ditos *</label>
                    <input type="number" id="creditosPrograma" name="creditos" class="form-input" required 
                           min="100" max="250" placeholder="Ingresa el n√∫mero total de cr√©ditos">
                </div>
                
                <div class="form-group">
                    <label for="descripcionPrograma" class="form-label">Descripci√≥n del Programa *</label>
                    <textarea id="descripcionPrograma" name="descripcion" class="form-input" required 
                              rows="4" placeholder="Describe el programa acad√©mico, sus objetivos y caracter√≠sticas principales"></textarea>
                </div>
                
                <div style="display: flex; gap: 1rem; margin-top: 2rem;">
                    <button type="submit" class="btn btn-success" style="flex: 1;">üíæ Guardar Programa</button>
                    <button type="button" class="btn btn-warning" onclick="hideModal('programaModal')" style="flex: 1;">‚ùå Cancelar</button>
                </div>
            </form>
        </div>
    </div>

    <script src="/js/utils.js"></script>
    <script src="/js/app.js"></script>
    <script>
        // Filtrar programas
        function filterProgramas() {
            const facultadFilter = document.getElementById('filterFacultad').value;
            const semestresFilter = document.getElementById('filterSemestres').value;
            const searchFilter = document.getElementById('searchPrograma').value.toLowerCase();
            
            const rows = document.querySelectorAll('#programas-table tbody tr');
            let totalVisible = 0;
            let ingenieria = 0;
            let ciencias = 0;
            let admin = 0;
            
            rows.forEach(row => {
                const facultad = row.cells[1].textContent.trim();
                const semestres = row.cells[2].textContent.trim();
                const nombre = row.cells[0].textContent.toLowerCase();
                
                let show = true;
                
                if (facultadFilter && facultad !== facultadFilter) show = false;
                if (semestresFilter && semestres !== semestresFilter) show = false;
                if (searchFilter && !nombre.includes(searchFilter)) show = false;
                
                row.style.display = show ? '' : 'none';
                
                if (show) {
                    totalVisible++;
                    if (facultad === 'Ingenier√≠a') ingenieria++;
                    else if (facultad === 'Ciencias') ciencias++;
                    else if (facultad === 'Administraci√≥n') admin++;
                }
            });
            
            // Actualizar estad√≠sticas del filtro
            document.getElementById('total-programas-filter').textContent = totalVisible;
            document.getElementById('programas-ingenieria-filter').textContent = ingenieria;
            document.getElementById('programas-ciencias-filter').textContent = ciencias;
            document.getElementById('programas-admin-filter').textContent = admin;
        }

        // Funci√≥n para abrir modal de edici√≥n
        function openEditPrograma(id) {
            // Implementar l√≥gica para cargar datos del programa
            console.log('Editando programa con ID:', id);
        }

        // Actualizar cr√©ditos autom√°ticamente seg√∫n semestres
        document.getElementById('semestresPrograma').addEventListener('change', function() {
            const semestres = parseInt(this.value);
            const creditosInput = document.getElementById('creditosPrograma');
            
            if (semestres === 6) {
                creditosInput.value = '120';
                creditosInput.placeholder = '120 cr√©ditos (recomendado)';
            } else if (semestres === 8) {
                creditosInput.value = '160';
                creditosInput.placeholder = '160 cr√©ditos (recomendado)';
            } else if (semestres === 10) {
                creditosInput.value = '200';
                creditosInput.placeholder = '200 cr√©ditos (recomendado)';
            }
        });
    </script>
</body>
</html>
